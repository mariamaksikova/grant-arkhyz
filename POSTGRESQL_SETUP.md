# Настройка PostgreSQL на Render.com

## Шаг 1: Создать PostgreSQL базу данных

1. Войдите в Render Dashboard: https://dashboard.render.com
2. Нажмите **"New +"** → **"PostgreSQL"**
3. Заполните форму:
   - **Name**: `grant-arkhyz-db` (или любое другое имя)
   - **Database**: `grant_arkhyz` (или любое другое имя)
   - **User**: `grant_arkhyz_user` (или любое другое имя)
   - **Region**: выберите ближайший регион
   - **PostgreSQL Version**: 15 (или последняя доступная)
   - **Plan**: **Free** (бесплатный план)
4. Нажмите **"Create Database"**

## Шаг 2: Получить строку подключения

После создания базы данных:

1. Откройте созданную базу данных в Dashboard
2. Найдите раздел **"Connections"** или **"Internal Database URL"**
3. Скопируйте строку подключения (она выглядит так):
   ```
   postgresql://user:password@host:5432/database
   ```

**Важно**: Используйте **"Internal Database URL"** (не External), так как ваше приложение находится на том же Render.

## Шаг 3: Добавить переменную окружения

1. Откройте ваш Web Service (`grant-arkhyz`) в Dashboard
2. Перейдите в раздел **"Environment"**
3. Нажмите **"Add Environment Variable"**
4. Заполните:
   - **Key**: `DATABASE_URL`
   - **Value**: вставьте скопированную строку подключения
5. Нажмите **"Save Changes"**

## Шаг 4: Перезапустить сервис

После добавления переменной окружения:

1. В настройках вашего Web Service нажмите **"Manual Deploy"** → **"Deploy latest commit"**
2. Или просто подождите автоматического деплоя после коммита

## Проверка работы

После деплоя проверьте логи сервиса. Должно быть:

```
✓ Подключено к базе данных PostgreSQL
✓ Режим: PRODUCTION
✓ Таблица bookings готова
✓ Таблица reviews готова
✓ Таблица investments готова
```

## Важно

- База данных PostgreSQL **бесплатна** на Render
- Данные **сохраняются** между деплоями
- База данных работает **отдельно** от вашего приложения
- При удалении базы данных все данные будут потеряны (делайте бэкапы!)

## Локальная разработка

Для локальной разработки:

1. Установите PostgreSQL локально или используйте Docker
2. Создайте базу данных локально
3. Добавьте переменную окружения `DATABASE_URL` в ваш `.env` файл:
   ```
   DATABASE_URL=postgresql://user:password@localhost:5432/grant_arkhyz
   ```

Или используйте SQLite для локальной разработки (нужно будет добавить проверку в коде).

